import networkx as nx
import matplotlib.pyplot as plt

G = nx.Graph()

stations = [
    "–í–æ–∫–∑–∞–ª—å–Ω–∞", "–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ", "–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤",
    "–ó–æ–ª–æ—Ç—ñ –í–æ—Ä–æ—Ç–∞", "–ì–µ—Ä–æ—ó–≤ –î–Ω—ñ–ø—Ä–∞", "–•—Ä–µ—â–∞—Ç–∏–∫",
    "–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞", "–õ—É–∫'—è–Ω—ñ–≤—Å—å–∫–∞", "–ü–∞–ª–∞—Ü –°–ø–æ—Ä—Ç—É"
]

G.add_nodes_from(stations)

edges = [
    ("–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞", "–í–æ–∫–∑–∞–ª—å–Ω–∞", {"weight": 5}),
    ("–í–æ–∫–∑–∞–ª—å–Ω–∞", "–•—Ä–µ—â–∞—Ç–∏–∫", {"weight": 4}),
    ("–•—Ä–µ—â–∞—Ç–∏–∫", "–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ", {"weight": 1}),
    ("–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ", "–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤", {"weight": 5}),
    ("–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ", "–ì–µ—Ä–æ—ó–≤ –î–Ω—ñ–ø—Ä–∞", {"weight": 35}),
    ("–ü–ª–æ—â–∞ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ì–µ—Ä–æ—ó–≤", "–ü–∞–ª–∞—Ü –°–ø–æ—Ä—Ç—É", {"weight": 1}),
    ("–ü–∞–ª–∞—Ü –°–ø–æ—Ä—Ç—É", "–ó–æ–ª–æ—Ç—ñ –í–æ—Ä–æ—Ç–∞", {"weight": 1}),
    ("–ó–æ–ª–æ—Ç—ñ –í–æ—Ä–æ—Ç–∞", "–õ—É–∫'—è–Ω—ñ–≤—Å—å–∫–∞" , {"weight": 4})
]

G.add_edges_from(edges)

pos = nx.spring_layout(G, seed=42)
nx.draw(G, pos, with_labels=True, node_size=700, node_color="skyblue", font_size=15, width=2)
labels = nx.get_edge_attributes(G, 'weight')
nx.draw_networkx_edge_labels(G, pos, edge_labels=labels)

plt.show()

#–û–±—Ä–∞—Ö—É–Ω–æ–∫ –Ω–∞–π–∫–æ—Ä–æ—Ç—à–∏—Ö —à–ª—è—Ö—ñ–≤
for source in G.nodes:
    lengths, paths = nx.single_source_dijkstra(G, source)
    print(f"\nüîπ –ù–∞–π–∫–æ—Ä–æ—Ç—à—ñ —à–ª—è—Ö–∏ –≤—ñ–¥ '{source}':")
    for target in G.nodes:
        if source != target:
            print(f"  –¥–æ '{target}': –≤—ñ–¥—Å—Ç–∞–Ω—å = {lengths[target]}, —à–ª—è—Ö = {' ‚Üí '.join(paths[target])}")

length, path = nx.single_source_dijkstra(G, source="–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞", target="–õ—É–∫'—è–Ω—ñ–≤—Å—å–∫–∞")
print(f"\nüöÜ –ù–∞–π–∫–æ—Ä–æ—Ç—à–∏–π —à–ª—è—Ö –∑ –ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–æ—ó –¥–æ –õ—É–∫'—è–Ω—ñ–≤—Å—å–∫–æ—ó: {path} (–≤—ñ–¥—Å—Ç–∞–Ω—å: {length})")